// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.DbtCloud
{
    /// <summary>
    /// Provide a partial set of permissions for an externally managed group (e.g., SCIM, manually created).
    /// This resource ONLY manages a subset of permissions and never creates or deletes groups.
    /// 
    /// This is designed for federated permission management where a platform team sets global permissions
    /// and individual teams manage their own project-specific permissions for the same group.
    /// 
    /// ⚠️  **Important Differences:**
    /// - `DbtCloudGroup`: Creates group and fully manages ALL permissions (single Pulumi Stack)
    /// - `DbtCloudGroupPartialPermissions`: Creates group and manages PARTIAL permissions (multiple Pulumi Stacks)
    /// - `DbtCloudScimGroupPermissions`: Externally-managed group, fully manages ALL permissions (replaces all permissions)
    /// - `DbtCloudScimGroupPartialPermissions`: Externally-managed group, manages PARTIAL permissions (adds/removes only specified permissions)
    /// 
    /// **Use Case:**
    /// - Group exists in external identity provider (e.g., Okta, Azure AD) and syncs via SCIM
    /// - Platform team manages base permissions (e.g., account-level access)
    /// - Individual teams manage their own project-specific permissions
    /// - Multiple Pulumi Stacks can safely manage different permissions for the same group
    /// 
    /// ⚠️  Do not mix different resource types for the same group:
    /// - Don't use `DbtCloudScimGroupPermissions` (full permissions) with `DbtCloudScimGroupPartialPermissions` (partial permissions)
    /// - Don't use `DbtCloudGroup` or `DbtCloudGroupPartialPermissions` for externally managed groups
    /// 
    /// The resource currently requires a Service Token with Account Admin access.
    /// 
    /// **Behavior:**
    /// - When creating: Adds specified permissions to the existing group (if not already present)
    /// - When updating: Adds new permissions and removes old permissions from this resource
    /// - When deleting: Removes only the permissions managed by this resource (group and other permissions remain)
    /// 
    /// &gt; This resource is designed for **federated permission management** where multiple teams manage different permissions for the same externally-managed group (e.g., SCIM groups).
    /// 
    /// &gt; **Warning: Duplicate Permissions Across States** - If multiple Terraform states define the **exact same permission** (identical `PermissionSet`, `ProjectId`, `AllProjects`, and `WritableEnvironmentCategories`), they will reference the same underlying permission object in dbt Cloud. This creates a conflict: when one state deletes its resource, it removes the permission from dbt Cloud, causing drift in other states that reference the same permission. **Best Practice:** Ensure each Terraform state manages **distinct** permissions. Coordinate with other teams to avoid defining identical permissions, or differentiate them using `WritableEnvironmentCategories`.
    /// 
    /// ## Use Case Guidelines
    /// 
    /// Choose the right resource for your use case:
    /// 
    /// | Resource | Group Creation | Permission Management | Use When |
    /// |----------|---------------|----------------------|----------|
    /// | `dbtcloud.Group` | ✅ Terraform creates | Full (replaces all) | Single Pulumi Stack manages everything |
    /// | `dbtcloud.GroupPartialPermissions` | ✅ Terraform creates | Partial (adds/removes) | Multiple workspaces manage same Terraform-created group |
    /// | `dbtcloud.ScimGroupPermissions` | ❌ External (SCIM) | Full (replaces all) | External group, single workspace manages all permissions |
    /// | `dbtcloud.ScimGroupPartialPermissions` | ❌ External (SCIM) | Partial (adds/removes) | External group, multiple workspaces manage different permissions |
    /// 
    /// ### Duplicate Permissions Across States
    /// 
    /// **The Problem:** If multiple Terraform states define identical permissions, they will reference the same permission object in dbt Cloud's API. There is no reference counting or ownership tracking.
    /// 
    /// **What Happens:**
    /// 1. State A creates a permission (e.g., developer on project 100)
    /// 2. State B defines the same permission and references the existing one
    /// 3. State A destroys its resource → permission is deleted from dbt Cloud
    /// 4. State B still expects the permission to exist → **drift and conflicts**
    /// 
    /// **Example of Conflict (❌ Avoid):**
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using DbtCloud = Pulumi.DbtCloud;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     // Terraform State 1 (Platform Team)
    ///     var platform = new DbtCloud.ScimGroupPartialPermissions("platform", new()
    ///     {
    ///         GroupId = 12345,
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "developer",
    ///                 ProjectId = 100,
    ///                 AllProjects = false,
    ///                 WritableEnvironmentCategories = new[]
    ///                 {
    ///                     "development",
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Terraform State 2 (Another Team) - IDENTICAL permission!
    ///     var otherTeam = new DbtCloud.ScimGroupPartialPermissions("other_team", new()
    ///     {
    ///         GroupId = 12345,
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "developer",
    ///                 ProjectId = 100,
    ///                 AllProjects = false,
    ///                 WritableEnvironmentCategories = new[]
    ///                 {
    ///                     "development",
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// **Example of Safe Usage (✅ Recommended):**
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using DbtCloud = Pulumi.DbtCloud;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     // Terraform State 1 (Platform Team) - Development environments
    ///     var platformDev = new DbtCloud.ScimGroupPartialPermissions("platform_dev", new()
    ///     {
    ///         GroupId = 12345,
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "developer",
    ///                 ProjectId = 100,
    ///                 AllProjects = false,
    ///                 WritableEnvironmentCategories = new[]
    ///                 {
    ///                     "development",
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Terraform State 2 (SRE Team) - Production environments
    ///     var sreProd = new DbtCloud.ScimGroupPartialPermissions("sre_prod", new()
    ///     {
    ///         GroupId = 12345,
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "developer",
    ///                 ProjectId = 100,
    ///                 AllProjects = false,
    ///                 WritableEnvironmentCategories = new[]
    ///                 {
    ///                     "staging",
    ///                     "production",
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// **Coordination Strategies:**
    /// 
    /// 1. **Differentiate by writable environments** - Most common and recommended
    /// 2. **Assign permission ownership** - Document which team manages which permission
    /// 3. **Use single state for identical permissions** - If needed, manage from one place
    /// 4. **Consider full permissions resource** - Use `dbtcloud.ScimGroupPermissions` if one state should own all permissions
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using DbtCloud = Pulumi.DbtCloud;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     // Retrieve the SCIM-managed group
    ///     var engineering = DbtCloud.GetGroups.Invoke(new()
    ///     {
    ///         Name = "Engineering Team",
    ///     });
    /// 
    ///     // Get the project to apply permissions to
    ///     var myProject = DbtCloud.GetProject.Invoke(new()
    ///     {
    ///         Name = "My Analytics Project",
    ///     });
    /// 
    ///     // Platform team can manage base account permissions
    ///     var baseAccess = new DbtCloud.ScimGroupPartialPermissions("base_access", new()
    ///     {
    ///         GroupId = engineering.Apply(getGroupsResult =&gt; getGroupsResult.Groups[0]?.Id),
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "member",
    ///                 AllProjects = true,
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Project team can manage project-specific permissions independently
    ///     var projectAccess = new DbtCloud.ScimGroupPartialPermissions("project_access", new()
    ///     {
    ///         GroupId = engineering.Apply(getGroupsResult =&gt; getGroupsResult.Groups[0]?.Id),
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "developer",
    ///                 ProjectId = myProject.Apply(getProjectResult =&gt; getProjectResult.Id),
    ///                 AllProjects = false,
    ///                 WritableEnvironmentCategories = new[]
    ///                 {
    ///                     "development",
    ///                     "staging",
    ///                 },
    ///             },
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "job_admin",
    ///                 ProjectId = myProject.Apply(getProjectResult =&gt; getProjectResult.Id),
    ///                 AllProjects = false,
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Example: Multiple projects managed by different teams
    ///     var analytics = DbtCloud.GetProject.Invoke(new()
    ///     {
    ///         Name = "Analytics",
    ///     });
    /// 
    ///     var dataScience = DbtCloud.GetProject.Invoke(new()
    ///     {
    ///         Name = "Data Science",
    ///     });
    /// 
    ///     // Analytics team manages their own project permissions
    ///     var analyticsScimGroupPartialPermissions = new DbtCloud.ScimGroupPartialPermissions("analytics", new()
    ///     {
    ///         GroupId = engineering.Apply(getGroupsResult =&gt; getGroupsResult.Groups[0]?.Id),
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "developer",
    ///                 ProjectId = analytics.Apply(getProjectResult =&gt; getProjectResult.Id),
    ///                 AllProjects = false,
    ///                 WritableEnvironmentCategories = new[]
    ///                 {
    ///                     "development",
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     // Data Science team manages their own project permissions
    ///     var dataScienceScimGroupPartialPermissions = new DbtCloud.ScimGroupPartialPermissions("data_science", new()
    ///     {
    ///         GroupId = engineering.Apply(getGroupsResult =&gt; getGroupsResult.Groups[0]?.Id),
    ///         Permissions = new[]
    ///         {
    ///             new DbtCloud.Inputs.ScimGroupPartialPermissionsPermissionArgs
    ///             {
    ///                 PermissionSet = "analyst",
    ///                 ProjectId = dataScience.Apply(getProjectResult =&gt; getProjectResult.Id),
    ///                 AllProjects = false,
    ///             },
    ///         },
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// &gt; **Import Not Supported:** This resource does not support `pulumi import` because it manages only a partial subset of permissions.
    /// There is no way for Terraform to know which specific permissions this resource instance should manage versus permissions
    /// managed by other resources or applied outside of Terraform. You must define the resource in your configuration from the start.
    /// </summary>
    [DbtCloudResourceType("dbtcloud:index/scimGroupPartialPermissions:ScimGroupPartialPermissions")]
    public partial class ScimGroupPartialPermissions : global::Pulumi.CustomResource
    {
        /// <summary>
        /// The ID of the existing group to manage partial permissions for. This group must already exist and is typically from an external identity provider synced via SCIM.
        /// </summary>
        [Output("groupId")]
        public Output<int> GroupId { get; private set; } = null!;

        /// <summary>
        /// Partial set of permissions to apply to the group. These permissions will be added to any existing permissions. Other permissions on the group will not be affected.
        /// </summary>
        [Output("permissions")]
        public Output<ImmutableArray<Outputs.ScimGroupPartialPermissionsPermission>> Permissions { get; private set; } = null!;


        /// <summary>
        /// Create a ScimGroupPartialPermissions resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ScimGroupPartialPermissions(string name, ScimGroupPartialPermissionsArgs args, CustomResourceOptions? options = null)
            : base("dbtcloud:index/scimGroupPartialPermissions:ScimGroupPartialPermissions", name, args ?? new ScimGroupPartialPermissionsArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ScimGroupPartialPermissions(string name, Input<string> id, ScimGroupPartialPermissionsState? state = null, CustomResourceOptions? options = null)
            : base("dbtcloud:index/scimGroupPartialPermissions:ScimGroupPartialPermissions", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                PluginDownloadURL = "github://api.github.com/pulumi/pulumi-dbtcloud",
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ScimGroupPartialPermissions resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ScimGroupPartialPermissions Get(string name, Input<string> id, ScimGroupPartialPermissionsState? state = null, CustomResourceOptions? options = null)
        {
            return new ScimGroupPartialPermissions(name, id, state, options);
        }
    }

    public sealed class ScimGroupPartialPermissionsArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The ID of the existing group to manage partial permissions for. This group must already exist and is typically from an external identity provider synced via SCIM.
        /// </summary>
        [Input("groupId", required: true)]
        public Input<int> GroupId { get; set; } = null!;

        [Input("permissions")]
        private InputList<Inputs.ScimGroupPartialPermissionsPermissionArgs>? _permissions;

        /// <summary>
        /// Partial set of permissions to apply to the group. These permissions will be added to any existing permissions. Other permissions on the group will not be affected.
        /// </summary>
        public InputList<Inputs.ScimGroupPartialPermissionsPermissionArgs> Permissions
        {
            get => _permissions ?? (_permissions = new InputList<Inputs.ScimGroupPartialPermissionsPermissionArgs>());
            set => _permissions = value;
        }

        public ScimGroupPartialPermissionsArgs()
        {
        }
        public static new ScimGroupPartialPermissionsArgs Empty => new ScimGroupPartialPermissionsArgs();
    }

    public sealed class ScimGroupPartialPermissionsState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The ID of the existing group to manage partial permissions for. This group must already exist and is typically from an external identity provider synced via SCIM.
        /// </summary>
        [Input("groupId")]
        public Input<int>? GroupId { get; set; }

        [Input("permissions")]
        private InputList<Inputs.ScimGroupPartialPermissionsPermissionGetArgs>? _permissions;

        /// <summary>
        /// Partial set of permissions to apply to the group. These permissions will be added to any existing permissions. Other permissions on the group will not be affected.
        /// </summary>
        public InputList<Inputs.ScimGroupPartialPermissionsPermissionGetArgs> Permissions
        {
            get => _permissions ?? (_permissions = new InputList<Inputs.ScimGroupPartialPermissionsPermissionGetArgs>());
            set => _permissions = value;
        }

        public ScimGroupPartialPermissionsState()
        {
        }
        public static new ScimGroupPartialPermissionsState Empty => new ScimGroupPartialPermissionsState();
    }
}
