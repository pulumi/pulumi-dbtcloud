// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.DbtCloud
{
    /// <summary>
    /// The provider type for the dbtcloud package. By default, resources use package-wide configuration
    /// settings, however an explicit `Provider` instance may be created and passed during resource
    /// construction to achieve fine-grained programmatic control over provider settings. See the
    /// [documentation](https://www.pulumi.com/docs/reference/programming-model/#providers) for more information.
    /// </summary>
    [DbtCloudResourceType("pulumi:providers:dbtcloud")]
    public partial class Provider : global::Pulumi.ProviderResource
    {
        /// <summary>
        /// URL for your dbt Cloud deployment. Instead of setting the parameter, you can set the environment variable `DBT_CLOUD_HOST_URL` - Defaults to https://cloud.getdbt.com/api
        /// </summary>
        [Output("hostUrl")]
        public Output<string?> HostUrl { get; private set; } = null!;

        /// <summary>
        /// API token for your dbt Cloud. Instead of setting the parameter, you can set the environment variable `DBT_CLOUD_TOKEN`
        /// </summary>
        [Output("token")]
        public Output<string?> Token { get; private set; } = null!;


        /// <summary>
        /// Create a Provider resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public Provider(string name, ProviderArgs? args = null, CustomResourceOptions? options = null)
            : base("dbtcloud", name, args ?? new ProviderArgs(), MakeResourceOptions(options, ""))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                PluginDownloadURL = "github://api.github.com/pulumi/pulumi-dbtcloud",
                AdditionalSecretOutputs =
                {
                    "token",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }

        /// <summary>
        /// This function returns a Terraform config object with terraform-namecased keys,to be used with the Terraform Module Provider.
        /// </summary>
        public global::Pulumi.Output<ProviderTerraformConfigResult> TerraformConfig()
            => global::Pulumi.Deployment.Instance.Call<ProviderTerraformConfigResult>("pulumi:providers:dbtcloud/terraformConfig", CallArgs.Empty, this);
    }

    public sealed class ProviderArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Account identifier for your dbt Cloud implementation. Instead of setting the parameter, you can set the environment variable `DBT_CLOUD_ACCOUNT_ID`
        /// </summary>
        [Input("accountId", json: true)]
        public Input<int>? AccountId { get; set; }

        /// <summary>
        /// If set to true, the provider will not retry requests that fail due to rate limiting. Defaults to false.
        /// </summary>
        [Input("disableRetry", json: true)]
        public Input<bool>? DisableRetry { get; set; }

        /// <summary>
        /// URL for your dbt Cloud deployment. Instead of setting the parameter, you can set the environment variable `DBT_CLOUD_HOST_URL` - Defaults to https://cloud.getdbt.com/api
        /// </summary>
        [Input("hostUrl")]
        public Input<string>? HostUrl { get; set; }

        /// <summary>
        /// The maximum number of retries to attempt for requests that fail due to rate limiting. Defaults to 3 retries.
        /// </summary>
        [Input("maxRetries", json: true)]
        public Input<int>? MaxRetries { get; set; }

        [Input("retriableStatusCodes", json: true)]
        private InputList<string>? _retriableStatusCodes;

        /// <summary>
        /// List of HTTP status codes that should be retried when encountered. Defaults to [429, 500, 502, 503, 504].
        /// </summary>
        public InputList<string> RetriableStatusCodes
        {
            get => _retriableStatusCodes ?? (_retriableStatusCodes = new InputList<string>());
            set => _retriableStatusCodes = value;
        }

        /// <summary>
        /// The number of seconds to wait before retrying a request that failed due to rate limiting. Defaults to 10 seconds.
        /// </summary>
        [Input("retryIntervalSeconds", json: true)]
        public Input<int>? RetryIntervalSeconds { get; set; }

        /// <summary>
        /// If set to true, the provider will not validate credentials during initialization. This can be useful for testing and for dbt Cloud API implementations that do not have standard authentication available. Defaults to false.
        /// </summary>
        [Input("skipCredentialsValidation", json: true)]
        public Input<bool>? SkipCredentialsValidation { get; set; }

        /// <summary>
        /// The timeout duration in seconds for HTTP requests to the dbt Cloud API. Defaults to 30 seconds.
        /// </summary>
        [Input("timeoutSeconds", json: true)]
        public Input<int>? TimeoutSeconds { get; set; }

        [Input("token")]
        private Input<string>? _token;

        /// <summary>
        /// API token for your dbt Cloud. Instead of setting the parameter, you can set the environment variable `DBT_CLOUD_TOKEN`
        /// </summary>
        public Input<string>? Token
        {
            get => _token;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _token = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        public ProviderArgs()
        {
            AccountId = Utilities.GetEnvInt32("DBT_CLOUD_ACCOUNT_ID");
            HostUrl = Utilities.GetEnv("DBT_CLOUD_HOST_URL") ?? "https://cloud.getdbt.com/api";
            Token = Utilities.GetEnv("DBT_CLOUD_TOKEN");
        }
        public static new ProviderArgs Empty => new ProviderArgs();
    }

    /// <summary>
    /// The results of the <see cref="Provider.TerraformConfig"/> method.
    /// </summary>
    [OutputType]
    public sealed class ProviderTerraformConfigResult
    {
        public readonly ImmutableDictionary<string, object> Result;

        [OutputConstructor]
        private ProviderTerraformConfigResult(ImmutableDictionary<string, object> result)
        {
            Result = result;
        }
    }
}
