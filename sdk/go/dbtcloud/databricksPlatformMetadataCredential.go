// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package dbtcloud

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-dbtcloud/sdk/go/dbtcloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages Databricks platform metadata credentials for external metadata ingestion in dbt Cloud.
//
// This resource configures credentials that allow dbt Cloud to connect directly to your Databricks workspace
// to ingest metadata outside of normal dbt project runs. This enables features like:
//
// - **Catalog Ingestion**: Ingest metadata about tables/views not defined in dbt
// - **Cost Optimization**: Query warehouse cost and performance data
// - **Cost Insights**: Enhanced cost visibility and analysis
//
// > **Note:** At least one of `catalogIngestionEnabled`, `costOptimizationEnabled`, or
// `costInsightsEnabled` must be enabled for the credential to be usable.
//
// > **Note:** The `connectionId` cannot be changed after creation. To use a different connection,
// you must destroy and recreate the resource.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-dbtcloud/sdk/go/dbtcloud"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			// Example: Databricks Platform Metadata Credential
//			_, err := dbtcloud.NewDatabricksPlatformMetadataCredential(ctx, "example", &dbtcloud.DatabricksPlatformMetadataCredentialArgs{
//				ConnectionId:            pulumi.Any(databricks.Id),
//				CatalogIngestionEnabled: pulumi.Bool(true),
//				CostOptimizationEnabled: pulumi.Bool(false),
//				CostInsightsEnabled:     pulumi.Bool(false),
//				Token:                   pulumi.Any(databricksToken),
//				Catalog:                 pulumi.String("main"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type DatabricksPlatformMetadataCredential struct {
	pulumi.CustomResourceState

	// The adapter version derived from the connection (e.g., 'snowflake*v0', 'databricks*v0'). This is read-only and determined by the connection.
	AdapterVersion pulumi.StringOutput `pulumi:"adapterVersion"`
	// The Unity Catalog name to use.
	Catalog pulumi.StringOutput `pulumi:"catalog"`
	// Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
	CatalogIngestionEnabled pulumi.BoolOutput `pulumi:"catalogIngestionEnabled"`
	// The ID of the global connection this credential is associated with. Cannot be changed after creation.
	ConnectionId pulumi.IntOutput `pulumi:"connectionId"`
	// Whether cost insights is enabled for this credential.
	CostInsightsEnabled pulumi.BoolOutput `pulumi:"costInsightsEnabled"`
	// Whether cost optimization data collection is enabled for this credential.
	CostOptimizationEnabled pulumi.BoolOutput `pulumi:"costOptimizationEnabled"`
	// The ID of the platform metadata credential.
	CredentialId pulumi.IntOutput `pulumi:"credentialId"`
	// The Databricks personal access token.
	Token pulumi.StringOutput `pulumi:"token"`
}

// NewDatabricksPlatformMetadataCredential registers a new resource with the given unique name, arguments, and options.
func NewDatabricksPlatformMetadataCredential(ctx *pulumi.Context,
	name string, args *DatabricksPlatformMetadataCredentialArgs, opts ...pulumi.ResourceOption) (*DatabricksPlatformMetadataCredential, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Catalog == nil {
		return nil, errors.New("invalid value for required argument 'Catalog'")
	}
	if args.ConnectionId == nil {
		return nil, errors.New("invalid value for required argument 'ConnectionId'")
	}
	if args.Token == nil {
		return nil, errors.New("invalid value for required argument 'Token'")
	}
	if args.Token != nil {
		args.Token = pulumi.ToSecret(args.Token).(pulumi.StringInput)
	}
	secrets := pulumi.AdditionalSecretOutputs([]string{
		"token",
	})
	opts = append(opts, secrets)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource DatabricksPlatformMetadataCredential
	err := ctx.RegisterResource("dbtcloud:index/databricksPlatformMetadataCredential:DatabricksPlatformMetadataCredential", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetDatabricksPlatformMetadataCredential gets an existing DatabricksPlatformMetadataCredential resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetDatabricksPlatformMetadataCredential(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *DatabricksPlatformMetadataCredentialState, opts ...pulumi.ResourceOption) (*DatabricksPlatformMetadataCredential, error) {
	var resource DatabricksPlatformMetadataCredential
	err := ctx.ReadResource("dbtcloud:index/databricksPlatformMetadataCredential:DatabricksPlatformMetadataCredential", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering DatabricksPlatformMetadataCredential resources.
type databricksPlatformMetadataCredentialState struct {
	// The adapter version derived from the connection (e.g., 'snowflake*v0', 'databricks*v0'). This is read-only and determined by the connection.
	AdapterVersion *string `pulumi:"adapterVersion"`
	// The Unity Catalog name to use.
	Catalog *string `pulumi:"catalog"`
	// Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
	CatalogIngestionEnabled *bool `pulumi:"catalogIngestionEnabled"`
	// The ID of the global connection this credential is associated with. Cannot be changed after creation.
	ConnectionId *int `pulumi:"connectionId"`
	// Whether cost insights is enabled for this credential.
	CostInsightsEnabled *bool `pulumi:"costInsightsEnabled"`
	// Whether cost optimization data collection is enabled for this credential.
	CostOptimizationEnabled *bool `pulumi:"costOptimizationEnabled"`
	// The ID of the platform metadata credential.
	CredentialId *int `pulumi:"credentialId"`
	// The Databricks personal access token.
	Token *string `pulumi:"token"`
}

type DatabricksPlatformMetadataCredentialState struct {
	// The adapter version derived from the connection (e.g., 'snowflake*v0', 'databricks*v0'). This is read-only and determined by the connection.
	AdapterVersion pulumi.StringPtrInput
	// The Unity Catalog name to use.
	Catalog pulumi.StringPtrInput
	// Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
	CatalogIngestionEnabled pulumi.BoolPtrInput
	// The ID of the global connection this credential is associated with. Cannot be changed after creation.
	ConnectionId pulumi.IntPtrInput
	// Whether cost insights is enabled for this credential.
	CostInsightsEnabled pulumi.BoolPtrInput
	// Whether cost optimization data collection is enabled for this credential.
	CostOptimizationEnabled pulumi.BoolPtrInput
	// The ID of the platform metadata credential.
	CredentialId pulumi.IntPtrInput
	// The Databricks personal access token.
	Token pulumi.StringPtrInput
}

func (DatabricksPlatformMetadataCredentialState) ElementType() reflect.Type {
	return reflect.TypeOf((*databricksPlatformMetadataCredentialState)(nil)).Elem()
}

type databricksPlatformMetadataCredentialArgs struct {
	// The Unity Catalog name to use.
	Catalog string `pulumi:"catalog"`
	// Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
	CatalogIngestionEnabled *bool `pulumi:"catalogIngestionEnabled"`
	// The ID of the global connection this credential is associated with. Cannot be changed after creation.
	ConnectionId int `pulumi:"connectionId"`
	// Whether cost insights is enabled for this credential.
	CostInsightsEnabled *bool `pulumi:"costInsightsEnabled"`
	// Whether cost optimization data collection is enabled for this credential.
	CostOptimizationEnabled *bool `pulumi:"costOptimizationEnabled"`
	// The Databricks personal access token.
	Token string `pulumi:"token"`
}

// The set of arguments for constructing a DatabricksPlatformMetadataCredential resource.
type DatabricksPlatformMetadataCredentialArgs struct {
	// The Unity Catalog name to use.
	Catalog pulumi.StringInput
	// Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
	CatalogIngestionEnabled pulumi.BoolPtrInput
	// The ID of the global connection this credential is associated with. Cannot be changed after creation.
	ConnectionId pulumi.IntInput
	// Whether cost insights is enabled for this credential.
	CostInsightsEnabled pulumi.BoolPtrInput
	// Whether cost optimization data collection is enabled for this credential.
	CostOptimizationEnabled pulumi.BoolPtrInput
	// The Databricks personal access token.
	Token pulumi.StringInput
}

func (DatabricksPlatformMetadataCredentialArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*databricksPlatformMetadataCredentialArgs)(nil)).Elem()
}

type DatabricksPlatformMetadataCredentialInput interface {
	pulumi.Input

	ToDatabricksPlatformMetadataCredentialOutput() DatabricksPlatformMetadataCredentialOutput
	ToDatabricksPlatformMetadataCredentialOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialOutput
}

func (*DatabricksPlatformMetadataCredential) ElementType() reflect.Type {
	return reflect.TypeOf((**DatabricksPlatformMetadataCredential)(nil)).Elem()
}

func (i *DatabricksPlatformMetadataCredential) ToDatabricksPlatformMetadataCredentialOutput() DatabricksPlatformMetadataCredentialOutput {
	return i.ToDatabricksPlatformMetadataCredentialOutputWithContext(context.Background())
}

func (i *DatabricksPlatformMetadataCredential) ToDatabricksPlatformMetadataCredentialOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DatabricksPlatformMetadataCredentialOutput)
}

// DatabricksPlatformMetadataCredentialArrayInput is an input type that accepts DatabricksPlatformMetadataCredentialArray and DatabricksPlatformMetadataCredentialArrayOutput values.
// You can construct a concrete instance of `DatabricksPlatformMetadataCredentialArrayInput` via:
//
//	DatabricksPlatformMetadataCredentialArray{ DatabricksPlatformMetadataCredentialArgs{...} }
type DatabricksPlatformMetadataCredentialArrayInput interface {
	pulumi.Input

	ToDatabricksPlatformMetadataCredentialArrayOutput() DatabricksPlatformMetadataCredentialArrayOutput
	ToDatabricksPlatformMetadataCredentialArrayOutputWithContext(context.Context) DatabricksPlatformMetadataCredentialArrayOutput
}

type DatabricksPlatformMetadataCredentialArray []DatabricksPlatformMetadataCredentialInput

func (DatabricksPlatformMetadataCredentialArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*DatabricksPlatformMetadataCredential)(nil)).Elem()
}

func (i DatabricksPlatformMetadataCredentialArray) ToDatabricksPlatformMetadataCredentialArrayOutput() DatabricksPlatformMetadataCredentialArrayOutput {
	return i.ToDatabricksPlatformMetadataCredentialArrayOutputWithContext(context.Background())
}

func (i DatabricksPlatformMetadataCredentialArray) ToDatabricksPlatformMetadataCredentialArrayOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DatabricksPlatformMetadataCredentialArrayOutput)
}

// DatabricksPlatformMetadataCredentialMapInput is an input type that accepts DatabricksPlatformMetadataCredentialMap and DatabricksPlatformMetadataCredentialMapOutput values.
// You can construct a concrete instance of `DatabricksPlatformMetadataCredentialMapInput` via:
//
//	DatabricksPlatformMetadataCredentialMap{ "key": DatabricksPlatformMetadataCredentialArgs{...} }
type DatabricksPlatformMetadataCredentialMapInput interface {
	pulumi.Input

	ToDatabricksPlatformMetadataCredentialMapOutput() DatabricksPlatformMetadataCredentialMapOutput
	ToDatabricksPlatformMetadataCredentialMapOutputWithContext(context.Context) DatabricksPlatformMetadataCredentialMapOutput
}

type DatabricksPlatformMetadataCredentialMap map[string]DatabricksPlatformMetadataCredentialInput

func (DatabricksPlatformMetadataCredentialMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*DatabricksPlatformMetadataCredential)(nil)).Elem()
}

func (i DatabricksPlatformMetadataCredentialMap) ToDatabricksPlatformMetadataCredentialMapOutput() DatabricksPlatformMetadataCredentialMapOutput {
	return i.ToDatabricksPlatformMetadataCredentialMapOutputWithContext(context.Background())
}

func (i DatabricksPlatformMetadataCredentialMap) ToDatabricksPlatformMetadataCredentialMapOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DatabricksPlatformMetadataCredentialMapOutput)
}

type DatabricksPlatformMetadataCredentialOutput struct{ *pulumi.OutputState }

func (DatabricksPlatformMetadataCredentialOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**DatabricksPlatformMetadataCredential)(nil)).Elem()
}

func (o DatabricksPlatformMetadataCredentialOutput) ToDatabricksPlatformMetadataCredentialOutput() DatabricksPlatformMetadataCredentialOutput {
	return o
}

func (o DatabricksPlatformMetadataCredentialOutput) ToDatabricksPlatformMetadataCredentialOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialOutput {
	return o
}

// The adapter version derived from the connection (e.g., 'snowflake*v0', 'databricks*v0'). This is read-only and determined by the connection.
func (o DatabricksPlatformMetadataCredentialOutput) AdapterVersion() pulumi.StringOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.StringOutput { return v.AdapterVersion }).(pulumi.StringOutput)
}

// The Unity Catalog name to use.
func (o DatabricksPlatformMetadataCredentialOutput) Catalog() pulumi.StringOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.StringOutput { return v.Catalog }).(pulumi.StringOutput)
}

// Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
func (o DatabricksPlatformMetadataCredentialOutput) CatalogIngestionEnabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.BoolOutput { return v.CatalogIngestionEnabled }).(pulumi.BoolOutput)
}

// The ID of the global connection this credential is associated with. Cannot be changed after creation.
func (o DatabricksPlatformMetadataCredentialOutput) ConnectionId() pulumi.IntOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.IntOutput { return v.ConnectionId }).(pulumi.IntOutput)
}

// Whether cost insights is enabled for this credential.
func (o DatabricksPlatformMetadataCredentialOutput) CostInsightsEnabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.BoolOutput { return v.CostInsightsEnabled }).(pulumi.BoolOutput)
}

// Whether cost optimization data collection is enabled for this credential.
func (o DatabricksPlatformMetadataCredentialOutput) CostOptimizationEnabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.BoolOutput { return v.CostOptimizationEnabled }).(pulumi.BoolOutput)
}

// The ID of the platform metadata credential.
func (o DatabricksPlatformMetadataCredentialOutput) CredentialId() pulumi.IntOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.IntOutput { return v.CredentialId }).(pulumi.IntOutput)
}

// The Databricks personal access token.
func (o DatabricksPlatformMetadataCredentialOutput) Token() pulumi.StringOutput {
	return o.ApplyT(func(v *DatabricksPlatformMetadataCredential) pulumi.StringOutput { return v.Token }).(pulumi.StringOutput)
}

type DatabricksPlatformMetadataCredentialArrayOutput struct{ *pulumi.OutputState }

func (DatabricksPlatformMetadataCredentialArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*DatabricksPlatformMetadataCredential)(nil)).Elem()
}

func (o DatabricksPlatformMetadataCredentialArrayOutput) ToDatabricksPlatformMetadataCredentialArrayOutput() DatabricksPlatformMetadataCredentialArrayOutput {
	return o
}

func (o DatabricksPlatformMetadataCredentialArrayOutput) ToDatabricksPlatformMetadataCredentialArrayOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialArrayOutput {
	return o
}

func (o DatabricksPlatformMetadataCredentialArrayOutput) Index(i pulumi.IntInput) DatabricksPlatformMetadataCredentialOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *DatabricksPlatformMetadataCredential {
		return vs[0].([]*DatabricksPlatformMetadataCredential)[vs[1].(int)]
	}).(DatabricksPlatformMetadataCredentialOutput)
}

type DatabricksPlatformMetadataCredentialMapOutput struct{ *pulumi.OutputState }

func (DatabricksPlatformMetadataCredentialMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*DatabricksPlatformMetadataCredential)(nil)).Elem()
}

func (o DatabricksPlatformMetadataCredentialMapOutput) ToDatabricksPlatformMetadataCredentialMapOutput() DatabricksPlatformMetadataCredentialMapOutput {
	return o
}

func (o DatabricksPlatformMetadataCredentialMapOutput) ToDatabricksPlatformMetadataCredentialMapOutputWithContext(ctx context.Context) DatabricksPlatformMetadataCredentialMapOutput {
	return o
}

func (o DatabricksPlatformMetadataCredentialMapOutput) MapIndex(k pulumi.StringInput) DatabricksPlatformMetadataCredentialOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *DatabricksPlatformMetadataCredential {
		return vs[0].(map[string]*DatabricksPlatformMetadataCredential)[vs[1].(string)]
	}).(DatabricksPlatformMetadataCredentialOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*DatabricksPlatformMetadataCredentialInput)(nil)).Elem(), &DatabricksPlatformMetadataCredential{})
	pulumi.RegisterInputType(reflect.TypeOf((*DatabricksPlatformMetadataCredentialArrayInput)(nil)).Elem(), DatabricksPlatformMetadataCredentialArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*DatabricksPlatformMetadataCredentialMapInput)(nil)).Elem(), DatabricksPlatformMetadataCredentialMap{})
	pulumi.RegisterOutputType(DatabricksPlatformMetadataCredentialOutput{})
	pulumi.RegisterOutputType(DatabricksPlatformMetadataCredentialArrayOutput{})
	pulumi.RegisterOutputType(DatabricksPlatformMetadataCredentialMapOutput{})
}
